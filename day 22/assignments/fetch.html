<html>
<head></head>
<body>
<h3>Asynchronous Programming in  JavaScript</h3>
	<hr/> 
    <input type="button" value="fetch into table" onclick="fn_fetch()"/><br/><br/>
    <table  id="table1"  border="2"  width="200"  cellpadding="10" cellspacing="0">
        <tr>
            <th>id</th>
            <th>Email</th>
            <th>first_name</th>
            <th>last_name</th>
            <th>avatar</th>
        </tr>
      </table>
	 
	<script>
         var  tableObj =  document.getElementById("table1");	

		  function fn_fetch()
          {
		  // subscribe the promise
		   let url =  "https://reqres.in/api/users";
			
			fetch(url).then(  (response)  => 
			{ 
					response.json().then ((result) =>  
					{
						
                        
                        ad_rows(result.data)
					});	 
			});


          }
          function ad_rows( jobArray)
          {
            for(let  item  of  jobArray)
						{
							 		var  row1 =  tableObj.insertRow(-1);			
						
									var  cell1 =  row1.insertCell(-1);
									var  cell2 =  row1.insertCell(-1);
									var  cell3 =  row1.insertCell(-1);
                                    var  cell4 =  row1.insertCell(-1);
                                    var  cell5 =  row1.insertCell(-1);
                  

									
				                    cell1.innerHTML = item.id;
                                    cell2.innerHTML = item.email;	

									cell3.innerHTML = item.first_name;						
									cell4.innerHTML = item.last_name;
                                    cell5.innerHTML = `<img src="${item.avatar}"/>`;	
                                     
                 					
								


						}
          }
          
          

          /* {"page":1,"per_page":6,"total":12,"total_pages":2,"data":[{"id":1,"email":"george.bluth@reqres.in","first_name":"George","last_name":"Bluth","avatar":"https://reqres.in/img/faces/1-image.jpg"},{"id":2,"email":"janet.weaver@reqres.in","first_name":"Janet","last_name":"Weaver","avatar":"https://reqres.in/img/faces/2-image.jpg"},{"id":3,"email":"emma.wong@reqres.in","first_name":"Emma","last_name":"Wong","avatar":"https://reqres.in/img/faces/3-image.jpg"},{"id":4,"email":"eve.holt@reqres.in","first_name":"Eve","last_name":"Holt","avatar":"https://reqres.in/img/faces/4-image.jpg"},{"id":5,"email":"charles.morris@reqres.in","first_name":"Charles","last_name":"Morris","avatar":"https://reqres.in/img/faces/5-image.jpg"},{"id":6,"email":"tracey.ramos@reqres.in","first_name":"Tracey","last_name":"Ramos","avatar":"https://reqres.in/img/faces/6-image.jpg"}],"support":{"url":"https://reqres.in/#support-heading","text":"To keep ReqRes free, contributions towards server costs are appreciated!"}}*/
			
			 
		
	</script>	 
</body>
</html>